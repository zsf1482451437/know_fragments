# webpack

## 插件

|     plugin     |                             作用                             |
| :------------: | :----------------------------------------------------------: |
| SentryWebpack  | 集成 `Sentry` **错误日志**收集服务，`Sentry` 是一个开源的错误日志**收集和分析**服务，可以帮助开发人员更快地定位和修复错误。该插件主要用于在**生产环境**中收集应用程序的错误日志，并将其与特定的 **Git 提交**关联起来，以便更方便地进行错误分析和调试。 |
|    Workbox     | `WorkboxPlugin` 是一个用于生成 `Service Worker` 的插件，用于实现**离线缓存**和**资源预缓存**等功能。`Service Worker` 是在**浏览器**和**网络**之间运行的**脚本**，用于提供**离线访问**和**缓存资源**。该插件主要用于优化应用程序的性能和用户体验，特别是在网络不稳定或者没有网络的情况下。 |
|  Compression   | 该插件支持多种压缩算法，如 `gzip`、`brotli` 等。压缩构建**输出文件**可以有效地减小文件大小，从而提高应用程序的加载速度和性能。 |
| RetryChunkLoad | 用于重试加载 `Webpack` **拆分代码块**的插件。该插件主要用于处理**网络不稳定**或者网络超时等情况下的**代码块加载失败**问题。通过配置该插件，可以让应用程序在网络不稳定的情况下更加健壮和稳定。 |

## 使用打包进度条插件demo

创建一个新的项目**目录webpack**

1.添加**package.json**

```bash
npm init -y
```

2.安装webpack和progress-bar-webpack-plugin插件

```bash
npm install webpack webpack-cli progress-bar-webpack-plugin --save-dev
```

3.创建一个src/index.js文件

```bash
console.log("hello");
```

4.创建一个webpack.config.js文件

```js
const path = require('path');
const ProgressBarPlugin = require('progress-bar-webpack-plugin');

module.exports = {
  mode: 'development',
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
  },
  plugins: [
    new ProgressBarPlugin()
  ]
};
```

5.使用**插件**打包

```bash
npx webpack --progress
```

--progress参数以**百分比**的形式显示打包进度，如果添加了插件才会以其他形式显示进度

Webpack将会编译你的项目，并在命令行中显示打包进度条。完成后，你可以在dist目录下找到生成的bundle.js文件。

## craco打包添加进度条

以下是一个简单的**示例项目**，演示如何在**React应用程序**中添加`webpackbar`插件来显示进度条。

1. 创建React应用程序

首先，你需要创建一个React应用程序。你可以使用`create-react-app`工具来快速创建一个React应用程序。在命令行中执行以下命令：

```bash
npx create-react-app my-app
cd my-app
```

2. 安装webpackbar插件

在应用程序目录中，使用以下命令安装`webpackbar`插件：

```bash
npm install webpackbar --save-dev
```

这个命令会将`webpackbar`插件安装到应用程序中，并将其添加到`package.json`文件的`devDependencies`部分中。

3. 修改craco配置文件

在应用程序目录中，创建一个名为`craco.config.js`的新文件，并添加以下代码：

```javascript
const WebpackBar = require('webpackbar');

module.exports = {
  plugins: [
    {
      plugin: {
        overrideWebpackConfig: ({webpackConfig, cracoConfig, pluginOptions, context: {env, paths}}) => {
          webpackConfig.plugins.push(new WebpackBar());
          return webpackConfig;
        },
      },
    },
  ],
};
```

这个配置文件使用`webpackbar`插件来显示构建进度条。在Webpack配置中添加`webpackbar`插件的代码是通过`overrideWebpackConfig`函数实现的。

4. 启动应用程序

在应用程序目录中，使用以下命令启动React应用程序：

```bash
npm start
```

这个命令会启动开发服务器，并在浏览器中打开React应用程序。在构建过程中，`webpackbar`插件会显示构建进度条和其他信息。

5. 构建应用程序

在应用程序目录中，使用以下命令构建React应用程序：

```bash
npm run build
```

这个命令会生成一个生产环境的构建，并将其输出到`build`目录中。在构建过程中，`webpackbar`插件会显示构建进度条和其他信息。

# eslint

## 疑难杂症

### **.eslintrc.js**

报错信息：

```
Cannot read config file: D:\workspace\pp\ce\b_d\app\client\.eslintrc.js
Error: Cannot read properties of undefined (reading '@typescript-eslint/no-restricted-imports')
```

