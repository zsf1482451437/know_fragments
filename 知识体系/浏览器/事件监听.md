# 1 监听方式

- script中
- 通过元素的on
- 通过EventTarget中的addEventListener

## 1.1 **元素的on**

```html
<div class="box" onclick="console.log(123)">

    </div>
    <script src="./test.js"></script>
```

这种现在基本不在使用~

## 1.2 **script中**

```html
<div class="box">

    </div>
    <script src="./test.js"></script>
```

```js
const divE1 = document.querySelector('.box')

divE1.onclick = function () {
  console.log(123)
}
```

### 缺点

不能重复，**不能多个函数对其响应**

当有多个相同事件，后面会覆盖掉前面

## 1.3 addEventListener

可以**多个响应函数**

目前用的比较多就是这种方式

```html
<div class="box">

    </div>
    <script src="./test.js"></script>
```

```js
const divE1 = document.querySelector('.box')

divE1.onclick = function () {
  console.log(123)
}
```

# 2 事件流

为什么会产生事件流呢?

当我们在浏览器上**对着一个元素点击**时，你点击的**不仅仅是这元素本身**

还有**可能点击了其它元素**，因为**元素之间是可以层叠**的~



## 2.1 事件冒泡

事件（如点击）从**最内层往外**依次传递的顺序，称**事件冒泡**

```html
<div class="box">
      <span></span>
    </div>
    <script src="./test.js"></script>
```

```js
const divE1 = document.querySelector('.box')
const spanE1 = document.querySelector('span')


divE1.addEventListener('click', () => {
  console.log('div被点击')
})

spanE1.addEventListener('click', () => {
  console.log('span被点击')
})

document.body.addEventListener('click', () => {
  console.log('body被点击')
})
// 点击span时，打印
// span被点击
// div被点击
// body被点击
```



## 2.2 事件捕获

与事件冒泡相反，事件从**最外层往内**依次传递，称**事件捕获**

**为什么会产生两种不同处理流呢？**

**浏览器早期开发**时，ie和Netscape公司都发现了这个问题，但是他们采取了**相反的策略**：

- ie：事件冒泡
- Netscape：事件捕获

### 监听事件捕获

如何去监听事件捕获呢？

**addEventListener第3个参数，true**，默认是false，事件冒泡

```html
<div class="box">
      <span></span>
    </div>
    <script src="./test.js"></script>
```

```js
const divE1 = document.querySelector('.box')
const spanE1 = document.querySelector('span')


divE1.addEventListener('click', () => {
  console.log('div被点击')
}, true)

spanE1.addEventListener('click', () => {
  console.log('span被点击')
}, true)

document.body.addEventListener('click', () => {
  console.log('body被点击')
}, true)
// 点击span时，打印
// body被点击
// div被点击
// span被点击
```

要是**同时有事件捕获和事件冒泡**，事件传递顺序是：先**事件捕获**再**事件冒泡**

# 3 事件对象event

当产生一个事件时，和**事件相关的信息**也伴随着产生了，浏览器将**这些信息放在一个对象里**，并且**传给**了对应的**处理函数**

```html
<div class="box"></div>
    <script src="./test.js"></script>
```

```js
const divE1 = document.querySelector('.box')

divE1.addEventListener('click', (event) => {
  console.log(event)
})// PointerEvent {isTrusted: true, pointerId: 1, width: 1, height: 1, pressure: 0, …}
```

## 3.1 常见属性

- 事件类型 type
- 事件源 target
- 事件发生位置 offsetX/Y

## 3.2 常见方法

| preventDefault  | 阻止默认行为       | 如a元素的默认跳转 |
| --------------- | ------------------ | ----------------- |
| stopPropagation | 阻止事件进一步传递 |                   |

